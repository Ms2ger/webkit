<html>
<script src="../editing.js"></script>
<script>

function mycopy(event)
{
    console.log(`mycopy: ${event}`)
    console.log(event.clipboardData.getData('text/plain'));
    event.clipboardData.setData('text/plain', "SUCCESS");
    console.log(event.clipboardData.getData('text/plain'));
    event.preventDefault();
}

function mypaste(event)
{
    var clip = event.clipboardData.getData('text/plain');
    console.log(`mypaste: ${event} -> ${clip}`)
    document.getElementById('result').innerHTML = clip;
    event.preventDefault();
}

function test()
{
    execCopyCommand();
    var e = document.getElementById('result');
    setSelectionCommand(e, 0, e, 0);
    execPasteCommand();
    
    if (window.testRunner)
        testRunner.dumpAsText();
}

</script>
<body onload='test()' onbeforecopy='event.preventDefault()' oncopy='mycopy(event)' onbeforepaste='event.preventDefault()' onpaste='mypaste(event)'>

RESULT: <div id='result' contenteditable='true'>FAILURE</div>

</body>
</html>
